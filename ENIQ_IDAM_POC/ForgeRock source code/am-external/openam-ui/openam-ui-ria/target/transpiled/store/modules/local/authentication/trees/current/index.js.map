{"version":3,"sources":["../../../../../../../XUI/store/modules/local/authentication/trees/current/index.jsm"],"names":["current","REMOVE_NODE","REMOVE_CURRENT_TREE","removeNode","removeCurrentTree","subReducer","nodes","tree","state","action","type","measurements","payload","properties","selected","id","node","connections","toNode"],"mappings":";;;;;;;sBAiCwBA,O;;;;;;;;;;;;;;;;;;;;;;;;;;AAXxB,QAAMC,cAAc,gDAApB;AACA,QAAMC,sBAAsB,wDAA5B;;AAEO,QAAMC,kCAAa,gCAAaF,WAAb,CAAnB;AACA,QAAMG,gDAAoB,gCAAaF,mBAAb,CAA1B;;AAEP,QAAMG,aAAa,4BAAgB;AAC/BC,8BAD+B;AAE/BC;AAF+B,KAAhB,CAAnB;;AAKe,aAASP,OAAT,GAAsC;AAAA,YAApBQ,KAAoB,uEAAZ,EAAY;AAAA,YAARC,MAAQ;;AACjD,gBAAQA,OAAOC,IAAf;AACI,iBAAKT,WAAL;AACI,uBAAO;AACHK,wCACOE,MAAMF,KADb;AAEIK,sCAAc,kBAAKH,MAAMF,KAAN,CAAYK,YAAjB,EAA+B,CAACF,OAAOG,OAAR,CAA/B,CAFlB;AAGIC,oCAAY,kBAAKL,MAAMF,KAAN,CAAYO,UAAjB,EAA6B,CAACJ,OAAOG,OAAR,CAA7B,CAHhB;AAIIE,kCAAWN,MAAMF,KAAN,CAAYQ,QAAZ,CAAqBC,EAArB,KAA4BN,OAAOG,OAApC,GAA+C,EAA/C,GAAoDJ,MAAMF,KAAN,CAAYQ;AAJ9E,sBADG;AAOHP,0BAAM,uBAAU,kBAAKC,MAAMD,IAAX,EAAiB,CAACE,OAAOG,OAAR,CAAjB,CAAV,EAA8C,UAACI,IAAD;AAAA,4CAC7CA,IAD6C;AAEhDC,yCAAa,kBAAKD,KAAKC,WAAV,EAAuB,UAACC,MAAD;AAAA,uCAAYA,WAAWT,OAAOG,OAA9B;AAAA,6BAAvB;AAFmC;AAAA,qBAA9C;AAPH,iBAAP;AAYJ,iBAAKV,mBAAL;AACI,uBAAO;AACHI,2BAAO;AACHK,sCAAc,EADX;AAEHE,oCAAY,EAFT;AAGHC,kCAAU;AAHP,qBADJ;AAMHP,0BAAM;AANH,iBAAP;AAQJ;AACI,uBAAOF,WAAWG,KAAX,EAAkBC,MAAlB,CAAP;AAxBR;AA0BH","file":"index.js","sourcesContent":["/*\n * The contents of this file are subject to the terms of the Common Development and\n * Distribution License (the License). You may not use this file except in compliance with the\n * License.\n *\n * You can obtain a copy of the License at legal/CDDLv1.0.txt. See the License for the\n * specific language governing permission and limitations under the License.\n *\n * When distributing Covered Software, include this CDDL Header Notice in each file and include\n * the License file at legal/CDDLv1.0.txt. If applicable, add the following below the CDDL\n * Header, with the fields enclosed by brackets [] replaced by your own identifying\n * information: \"Portions copyright [year] [name of copyright owner]\".\n *\n * Copyright 2017 ForgeRock AS.\n */\nimport { mapValues, omit } from \"lodash\";\nimport { combineReducers } from \"redux\";\nimport { createAction } from \"redux-actions\";\n\nimport nodes from \"./nodes/index\";\nimport tree from \"./tree\";\n\nconst REMOVE_NODE = \"local/authentication/trees/current/REMOVE_NODE\";\nconst REMOVE_CURRENT_TREE = \"local/authentication/trees/current/REMOVE_CURRENT_TREE\";\n\nexport const removeNode = createAction(REMOVE_NODE);\nexport const removeCurrentTree = createAction(REMOVE_CURRENT_TREE);\n\nconst subReducer = combineReducers({\n    nodes,\n    tree\n});\n\nexport default function current (state = {}, action) {\n    switch (action.type) {\n        case REMOVE_NODE:\n            return {\n                nodes: {\n                    ...state.nodes,\n                    measurements: omit(state.nodes.measurements, [action.payload]),\n                    properties: omit(state.nodes.properties, [action.payload]),\n                    selected: (state.nodes.selected.id === action.payload) ? {} : state.nodes.selected\n                },\n                tree: mapValues(omit(state.tree, [action.payload]), (node) => ({\n                    ...node,\n                    connections: omit(node.connections, (toNode) => toNode === action.payload)\n                }))\n            };\n        case REMOVE_CURRENT_TREE:\n            return {\n                nodes: {\n                    measurements: {},\n                    properties: {},\n                    selected: {}\n                },\n                tree: {}\n            };\n        default:\n            return subReducer(state, action);\n    }\n}\n"]}