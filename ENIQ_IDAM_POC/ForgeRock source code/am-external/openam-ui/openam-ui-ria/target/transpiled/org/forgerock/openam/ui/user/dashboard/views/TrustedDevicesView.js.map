{"version":3,"sources":["../../../../../../../../XUI/org/forgerock/openam/ui/user/dashboard/views/TrustedDevicesView.js"],"names":["define","$","_","AbstractView","TrustedDevicesService","TrustedDevices","extend","template","noBaseTemplate","element","events","render","self","getTrustedDevices","then","data","devices","result","parentRender","$el","find","tooltip","deleteDevice","event","preventDefault","deleteTrustedDevice","currentTarget","id","console","log","error"],"mappings":";;AAAA;;;;;;;;;;;;;;;;AAgBAA,OAAO,CACH,QADG,EAEH,QAFG,EAGH,mDAHG,EAIH,uEAJG,CAAP,EAKG,UAAUC,CAAV,EAAaC,CAAb,EAAgBC,YAAhB,EAA8BC,qBAA9B,EAAqD;AACpD,QAAIC,iBAAiBF,aAAaG,MAAb,CAAoB;AACrCC,kBAAU,sDAD2B;AAErCC,wBAAgB,IAFqB;AAGrCC,iBAAS,0BAH4B;AAIrCC,gBAAQ;AACJ,qCAA0B;AADtB,SAJ6B;;AAQrCC,cARqC,oBAQ3B;AACN,gBAAIC,OAAO,IAAX;;AAEAR,kCAAsBS,iBAAtB,GAA0CC,IAA1C,CAA+C,UAAUC,IAAV,EAAgB;AAC3DH,qBAAKG,IAAL,CAAUC,OAAV,GAAoBD,KAAKE,MAAzB;AACAL,qBAAKM,YAAL,CAAkB,YAAY;AAC1BN,yBAAKO,GAAL,CAASC,IAAT,CAAc,2BAAd,EAA2CC,OAA3C;AACH,iBAFD;AAGH,aALD;AAMH,SAjBoC;AAmBrCC,oBAnBqC,wBAmBvBC,KAnBuB,EAmBhB;AACjBA,kBAAMC,cAAN;AACA,gBAAIZ,OAAO,IAAX;;AAEAR,kCAAsBqB,mBAAtB,CAA0CF,MAAMG,aAAN,CAAoBC,EAA9D,EAAkEb,IAAlE,CAAuE,YAAY;AAC/Ec,wBAAQC,GAAR,CAAY,wBAAZ;AACAjB,qBAAKD,MAAL;AACH,aAHD,EAGG,YAAY;AACXiB,wBAAQE,KAAR,CAAc,iCAAd;AACH,aALD;AAMH;AA7BoC,KAApB,CAArB;;AAgCA,WAAO,IAAIzB,cAAJ,EAAP;AACH,CAvCD","file":"TrustedDevicesView.js","sourcesContent":["/*\n * The contents of this file are subject to the terms of the Common Development and\n * Distribution License (the License). You may not use this file except in compliance with the\n * License.\n *\n * You can obtain a copy of the License at legal/CDDLv1.0.txt. See the License for the\n * specific language governing permission and limitations under the License.\n *\n * When distributing Covered Software, include this CDDL Header Notice in each file and include\n * the License file at legal/CDDLv1.0.txt. If applicable, add the following below the CDDL\n * Header, with the fields enclosed by brackets [] replaced by your own identifying\n * information: \"Portions copyright [year] [name of copyright owner]\".\n *\n * Copyright 2015-2017 ForgeRock AS.\n */\n\ndefine([\n    \"jquery\",\n    \"lodash\",\n    \"org/forgerock/commons/ui/common/main/AbstractView\",\n    \"org/forgerock/openam/ui/user/dashboard/services/TrustedDevicesService\"\n], function ($, _, AbstractView, TrustedDevicesService) {\n    var TrustedDevices = AbstractView.extend({\n        template: \"templates/user/dashboard/TrustedDevicesTemplate.html\",\n        noBaseTemplate: true,\n        element: \"#myTrustedDevicesSection\",\n        events: {\n            \"click  a.deleteDevice\" : \"deleteDevice\"\n        },\n\n        render () {\n            var self = this;\n\n            TrustedDevicesService.getTrustedDevices().then(function (data) {\n                self.data.devices = data.result;\n                self.parentRender(function () {\n                    self.$el.find(\"[data-toggle=\\\"tooltip\\\"]\").tooltip();\n                });\n            });\n        },\n\n        deleteDevice (event) {\n            event.preventDefault();\n            var self = this;\n\n            TrustedDevicesService.deleteTrustedDevice(event.currentTarget.id).then(function () {\n                console.log(\"Deleted trusted device\");\n                self.render();\n            }, function () {\n                console.error(\"Failed to delete trusted device\");\n            });\n        }\n    });\n\n    return new TrustedDevices();\n});\n"]}