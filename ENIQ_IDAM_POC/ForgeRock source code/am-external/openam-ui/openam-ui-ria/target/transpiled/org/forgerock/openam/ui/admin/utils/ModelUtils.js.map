{"version":3,"sources":["../../../../../../../XUI/org/forgerock/openam/ui/admin/utils/ModelUtils.js"],"names":["define","$","_","Messages","EventManager","Constants","obj","hasError","response","has","isString","responseJSON","message","errorHandler","get","sendEvent","EVENT_UNAUTHORIZED","error","addMessage","type","TYPE_DANGER","escape","t"],"mappings":";;AAAA;;;;;;;;;;;;;;;;AAgBAA,OAAO,CACH,QADG,EAEH,QAFG,EAGH,qDAHG,EAIH,mDAJG,EAKH,gDALG,CAAP,EAMG,UAAUC,CAAV,EAAaC,CAAb,EAAgBC,QAAhB,EAA0BC,YAA1B,EAAwCC,SAAxC,EAAmD;AAClD;;;AAGA,QAAIC,MAAM,EAAV;;AAEA,aAASC,QAAT,CAAmBC,QAAnB,EAA6B;AACzB,eAAON,EAAEO,GAAF,CAAMD,QAAN,EAAgB,sBAAhB,KAA2CN,EAAEQ,QAAF,CAAWF,SAASG,YAAT,CAAsBC,OAAjC,CAAlD;AACH;;AAEDN,QAAIO,YAAJ,GAAmB,UAAUL,QAAV,EAAoB;AACnC,YAAIN,EAAEY,GAAF,CAAMN,QAAN,EAAgB,QAAhB,MAA8B,GAAlC,EAAuC;AACnCJ,yBAAaW,SAAb,CAAuBV,UAAUW,kBAAjC,EAAqD,EAAEC,OAAOT,SAASS,KAAT,EAAT,EAArD;AACH,SAFD,MAEO,IAAIV,SAASC,QAAT,CAAJ,EAAwB;AAC3BL,qBAASe,UAAT,CAAoB,EAAEC,MAAMhB,SAASiB,WAAjB,EAA8BC,QAAQ,IAAtC,EAA4Cb,kBAA5C,EAApB;AACH,SAFM,MAEA;AACHL,qBAASe,UAAT,CAAoB,EAAEC,MAAMhB,SAASiB,WAAjB,EAA8BR,SAASX,EAAEqB,CAAF,CAAI,wCAAJ,CAAvC,EAApB;AACH;AACJ,KARD;;AAUA,WAAOhB,GAAP;AACH,CA3BD","file":"ModelUtils.js","sourcesContent":["/*\n * The contents of this file are subject to the terms of the Common Development and\n * Distribution License (the License). You may not use this file except in compliance with the\n * License.\n *\n * You can obtain a copy of the License at legal/CDDLv1.0.txt. See the License for the\n * specific language governing permission and limitations under the License.\n *\n * When distributing Covered Software, include this CDDL Header Notice in each file and include\n * the License file at legal/CDDLv1.0.txt. If applicable, add the following below the CDDL\n * Header, with the fields enclosed by brackets [] replaced by your own identifying\n * information: \"Portions copyright [year] [name of copyright owner]\".\n *\n * Copyright 2015-2017 ForgeRock AS.\n */\n\ndefine([\n    \"jquery\",\n    \"lodash\",\n    \"org/forgerock/commons/ui/common/components/Messages\",\n    \"org/forgerock/commons/ui/common/main/EventManager\",\n    \"org/forgerock/commons/ui/common/util/Constants\"\n], function ($, _, Messages, EventManager, Constants) {\n    /**\n     * @exports org/forgerock/openam/ui/admin/utils/ModelUtils\n     */\n    var obj = {};\n\n    function hasError (response) {\n        return _.has(response, \"responseJSON.message\") && _.isString(response.responseJSON.message);\n    }\n\n    obj.errorHandler = function (response) {\n        if (_.get(response, \"status\") === 401) {\n            EventManager.sendEvent(Constants.EVENT_UNAUTHORIZED, { error: response.error() });\n        } else if (hasError(response)) {\n            Messages.addMessage({ type: Messages.TYPE_DANGER, escape: true, response });\n        } else {\n            Messages.addMessage({ type: Messages.TYPE_DANGER, message: $.t(\"config.messages.CommonMessages.unknown\") });\n        }\n    };\n\n    return obj;\n});\n"]}