{"version":3,"sources":["../../../../../../../../../../../XUI/org/forgerock/openam/ui/admin/views/realms/authorization/policies/attributes/SubjectResponseAttributesView.js"],"names":["define","$","_","AbstractView","SubjectResponseAttributesView","extend","element","template","noBaseTemplate","attrType","render","args","callback","self","attr","data","selectedUserAttributes","allUserAttributes","each","propertyName","selected","find","obj","push","parentRender","initSelectize","getAttrs","value","type","sortBy","$el","selectize","plugins","delimiter","persist","create","hideSelected","onChange"],"mappings":";;AAAA;;;;;;;;;;;;;;;;AAgBAA,OAAO,CACH,QADG,EAEH,QAFG,EAGH,mDAHG;;AAKH;AACA,WANG,CAAP,EAOG,UAAUC,CAAV,EAAaC,CAAb,EAAgBC,YAAhB,EAA8B;AAC7B,QAAIC,gCAAgCD,aAAaE,MAAb,CAAoB;AACpDC,iBAAS,YAD2C;AAEpDC,kBAAU,+FAF0C;AAGpDC,wBAAgB,IAHoC;AAIpDC,kBAAU,MAJ0C;;AAMpDC,cANoD,kBAM5CC,IAN4C,EAMtCC,QANsC,EAM5B;AACpB,gBAAIC,OAAO,IAAX;AAAA,gBACIC,IADJ;;AAGA,iBAAKC,IAAL,CAAUC,sBAAV,GAAmCL,KAAK,CAAL,CAAnC;AACA,iBAAKI,IAAL,CAAUE,iBAAV,GAA8B,EAA9B;;AAEAf,cAAEgB,IAAF,CAAOP,KAAK,CAAL,CAAP,EAAgB,UAAUQ,YAAV,EAAwB;AACpCL,uBAAO,EAAP;AACAA,qBAAKK,YAAL,GAAoBA,YAApB;AACAL,qBAAKM,QAAL,GAAgBlB,EAAEmB,IAAF,CAAOR,KAAKE,IAAL,CAAUC,sBAAjB,EAAyC,UAAUM,GAAV,EAAe;AACpE,2BAAOA,IAAIH,YAAJ,KAAqBA,YAA5B;AACH,iBAFe,CAAhB;AAGAN,qBAAKE,IAAL,CAAUE,iBAAV,CAA4BM,IAA5B,CAAiCT,IAAjC;AACH,aAPD;;AASA,iBAAKU,YAAL,CAAkB,YAAY;AAC1BX,qBAAKY,aAAL;;AAEA,oBAAIb,QAAJ,EAAc;AACVA;AACH;AACJ,aAND;AAOH,SA7BmD;AA+BpDc,gBA/BoD,sBA+BxC;AACR,gBAAIX,OAAO,EAAX;AAAA,gBACID,IADJ;AAAA,gBAEID,OAAO,IAFX;;AAIAX,cAAEgB,IAAF,CAAO,KAAKH,IAAL,CAAUC,sBAAjB,EAAyC,UAAUW,KAAV,EAAiB;AACtDb,uBAAO,EAAP;AACAA,qBAAKc,IAAL,GAAYf,KAAKJ,QAAjB;AACAK,qBAAKK,YAAL,GAAoBQ,MAAMR,YAAN,IAAsBQ,KAA1C;AACAZ,qBAAKQ,IAAL,CAAUT,IAAV;AACH,aALD;;AAOAC,mBAAOb,EAAE2B,MAAF,CAASd,IAAT,EAAe,cAAf,CAAP;;AAEA,mBAAOA,IAAP;AACH,SA9CmD;AAgDpDU,qBAhDoD,2BAgDnC;AACb,gBAAIZ,OAAO,IAAX;;AAEA,iBAAKiB,GAAL,CAAST,IAAT,CAAc,YAAd,EAA4BH,IAA5B,CAAiC,YAAY;AACzCjB,kBAAE,IAAF,EAAQ8B,SAAR,CAAkB;AACdC,6BAAS,CAAC,sBAAD,CADK;AAEdC,+BAAW,KAFG;AAGdC,6BAAS,KAHK;AAIdC,4BAAQ,KAJM;AAKdC,kCAAc,IALA;AAMdC,4BANc,oBAMJV,KANI,EAMG;AACbd,6BAAKE,IAAL,CAAUC,sBAAV,GAAmCW,KAAnC;AACH;AARa,iBAAlB;AAUH,aAXD;AAYH;AA/DmD,KAApB,CAApC;;AAkEA,WAAO,IAAIvB,6BAAJ,EAAP;AACH,CA3ED","file":"SubjectResponseAttributesView.js","sourcesContent":["/*\n * The contents of this file are subject to the terms of the Common Development and\n * Distribution License (the License). You may not use this file except in compliance with the\n * License.\n *\n * You can obtain a copy of the License at legal/CDDLv1.0.txt. See the License for the\n * specific language governing permission and limitations under the License.\n *\n * When distributing Covered Software, include this CDDL Header Notice in each file and include\n * the License file at legal/CDDLv1.0.txt. If applicable, add the following below the CDDL\n * Header, with the fields enclosed by brackets [] replaced by your own identifying\n * information: \"Portions copyright [year] [name of copyright owner]\".\n *\n * Copyright 2014-2017 ForgeRock AS.\n */\n\ndefine([\n    \"jquery\",\n    \"lodash\",\n    \"org/forgerock/commons/ui/common/main/AbstractView\",\n\n    // jquery dependencies\n    \"selectize\"\n], function ($, _, AbstractView) {\n    var SubjectResponseAttributesView = AbstractView.extend({\n        element: \"#userAttrs\",\n        template: \"templates/admin/views/realms/authorization/policies/attributes/SubjectAttributesTemplate.html\",\n        noBaseTemplate: true,\n        attrType: \"User\",\n\n        render (args, callback) {\n            var self = this,\n                attr;\n\n            this.data.selectedUserAttributes = args[0];\n            this.data.allUserAttributes = [];\n\n            _.each(args[1], function (propertyName) {\n                attr = {};\n                attr.propertyName = propertyName;\n                attr.selected = _.find(self.data.selectedUserAttributes, function (obj) {\n                    return obj.propertyName === propertyName;\n                });\n                self.data.allUserAttributes.push(attr);\n            });\n\n            this.parentRender(function () {\n                self.initSelectize();\n\n                if (callback) {\n                    callback();\n                }\n            });\n        },\n\n        getAttrs () {\n            var data = [],\n                attr,\n                self = this;\n\n            _.each(this.data.selectedUserAttributes, function (value) {\n                attr = {};\n                attr.type = self.attrType;\n                attr.propertyName = value.propertyName || value;\n                data.push(attr);\n            });\n\n            data = _.sortBy(data, \"propertyName\");\n\n            return data;\n        },\n\n        initSelectize () {\n            var self = this;\n\n            this.$el.find(\".selectize\").each(function () {\n                $(this).selectize({\n                    plugins: [\"restore_on_backspace\"],\n                    delimiter: false,\n                    persist: false,\n                    create: false,\n                    hideSelected: true,\n                    onChange (value) {\n                        self.data.selectedUserAttributes = value;\n                    }\n                });\n            });\n        }\n    });\n\n    return new SubjectResponseAttributesView();\n});\n"]}