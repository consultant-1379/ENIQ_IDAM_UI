{"version":3,"sources":["../../../../../../../../XUI/org/forgerock/openam/ui/user/dashboard/services/MyApplicationsService.js"],"names":["define","_","AbstractDelegate","Constants","fetchUrl","obj","host","context","sortApps","apps","map","sortBy","keys","key","app","id","each","v","k","getMyApplications","serviceCall","url","default","headers","then","getAvailableApplications"],"mappings":";;AAAA;;;;;;;;;;;;;;;;AAgBAA,OAAO,CACH,QADG,EAEH,uDAFG,EAGH,gDAHG,EAIH,kDAJG,CAAP,EAKG,UAAUC,CAAV,EAAaC,gBAAb,EAA+BC,SAA/B,EAA0CC,QAA1C,EAAoD;AACnD,QAAIC,MAAM,IAAIH,gBAAJ,MAAwBC,UAAUG,IAAlC,GAAyCH,UAAUI,OAAnD,WAAV;;AAEA,aAASC,QAAT,CAAmBC,IAAnB,EAAyB;AACrB,eAAOR,EAAES,GAAF,CAAMT,EAAEU,MAAF,CAASV,EAAEW,IAAF,CAAOH,IAAP,CAAT,EAAuB,UAAUI,GAAV,EAAe;AAAE,mBAAOA,GAAP;AAAa,SAArD,CAAN,EAA8D,UAAUA,GAAV,EAAe;AAChF,gBAAIC,MAAM;AACNC,oBAAIF;AADE,aAAV;AAGAZ,cAAEe,IAAF,CAAOP,KAAKI,GAAL,CAAP,EAAkB,UAAUI,CAAV,EAAaC,CAAb,EAAgB;AAAEJ,oBAAII,CAAJ,IAASD,EAAE,CAAF,CAAT;AAAgB,aAApD;AACA,mBAAOH,GAAP;AACH,SANM,CAAP;AAOH;;AAEDT,QAAIc,iBAAJ,GAAwB,YAAY;AAChC,eAAOd,IAAIe,WAAJ,CAAgB;AACnBC,iBAAKjB,SAASkB,OAAT,CAAiB,qBAAjB,CADc;AAEnBC,qBAAS,EAAE,iBAAiB,UAAnB,EAA+B,sBAAsB,2BAArD;AAFU,SAAhB,EAGJC,IAHI,CAGChB,QAHD,CAAP;AAIH,KALD;;AAOAH,QAAIoB,wBAAJ,GAA+B,YAAY;AACvC,eAAOpB,IAAIe,WAAJ,CAAgB;AACnBC,iBAAKjB,SAASkB,OAAT,CAAiB,sBAAjB,CADc;AAEnBC,qBAAS,EAAE,iBAAiB,UAAnB,EAA+B,sBAAsB,2BAArD;AAFU,SAAhB,EAGJC,IAHI,CAGChB,QAHD,CAAP;AAIH,KALD;;AAOA,WAAOH,GAAP;AACH,CAjCD","file":"MyApplicationsService.js","sourcesContent":["/*\n * The contents of this file are subject to the terms of the Common Development and\n * Distribution License (the License). You may not use this file except in compliance with the\n * License.\n *\n * You can obtain a copy of the License at legal/CDDLv1.0.txt. See the License for the\n * specific language governing permission and limitations under the License.\n *\n * When distributing Covered Software, include this CDDL Header Notice in each file and include\n * the License file at legal/CDDLv1.0.txt. If applicable, add the following below the CDDL\n * Header, with the fields enclosed by brackets [] replaced by your own identifying\n * information: \"Portions copyright [year] [name of copyright owner]\".\n *\n * Copyright 2015-2017 ForgeRock AS.\n */\n\ndefine([\n    \"lodash\",\n    \"org/forgerock/commons/ui/common/main/AbstractDelegate\",\n    \"org/forgerock/commons/ui/common/util/Constants\",\n    \"org/forgerock/openam/ui/common/services/fetchUrl\"\n], function (_, AbstractDelegate, Constants, fetchUrl) {\n    var obj = new AbstractDelegate(`${Constants.host}${Constants.context}/json`);\n\n    function sortApps (apps) {\n        return _.map(_.sortBy(_.keys(apps), function (key) { return key; }), function (key) {\n            var app = {\n                id: key\n            };\n            _.each(apps[key], function (v, k) { app[k] = v[0]; });\n            return app;\n        });\n    }\n\n    obj.getMyApplications = function () {\n        return obj.serviceCall({\n            url: fetchUrl.default(\"/dashboard/assigned\"),\n            headers: { \"Cache-Control\": \"no-cache\", \"Accept-API-Version\": \"protocol=1.0,resource=1.0\" }\n        }).then(sortApps);\n    };\n\n    obj.getAvailableApplications = function () {\n        return obj.serviceCall({\n            url: fetchUrl.default(\"/dashboard/available\"),\n            headers: { \"Cache-Control\": \"no-cache\", \"Accept-API-Version\": \"protocol=1.0,resource=1.0\" }\n        }).then(sortApps);\n    };\n\n    return obj;\n});\n"]}