{"version":3,"sources":["../../../../../../../XUI/org/forgerock/commons/ui/common/maines/SessionManager.js"],"names":["define","$","_","cookieHelper","AbstractConfigurationAware","ModuleLoader","obj","login","params","successCallback","errorCallback","deleteCookie","load","configuration","loginHelperClass","then","helper","promiseWrapper","bind","curry","success","error","logout","getLoggedUser"],"mappings":";;AAAA;;;;;;;;;;;;;;;AAeA;AACCA,OAAO,CACJ,QADI,EAEJ,YAFI,EAGJ,mDAHI,EAIJ,iEAJI,EAKJ,mDALI,CAAP,EAME,UAASC,CAAT,EAAYC,CAAZ,EAAeC,YAAf,EAA6BC,0BAA7B,EAAyDC,YAAzD,EAAuE;AACtE,QAAIC,MAAM,IAAIF,0BAAJ,EAAV;;AAEAE,QAAIC,KAAJ,GAAY,UAASC,MAAT,EAAiBC,eAAjB,EAAkCC,aAAlC,EAAiD;AACzD;AACAP,qBAAaQ,YAAb,CAA0B,aAA1B,EAAyC,GAAzC,EAA8C,EAA9C;AACA,eAAON,aAAaO,IAAb,CAAkBN,IAAIO,aAAJ,CAAkBC,gBAApC,EAAsDC,IAAtD,CAA2D,UAAUC,MAAV,EAAkB;AAChF,mBAAOX,aAAaY,cAAb,CAA4Bf,EAAEgB,IAAF,CAAOhB,EAAEiB,KAAF,CAAQH,OAAOT,KAAf,EAAsBC,MAAtB,CAAP,EAAsCQ,MAAtC,CAA5B,EAA2E;AAC9EI,yBAASX,eADqE;AAE9EY,uBAAOX;AAFuE,aAA3E,CAAP;AAIH,SALM,CAAP;AAMH,KATD;;AAWAJ,QAAIgB,MAAJ,GAAa,UAASb,eAAT,EAA0BC,aAA1B,EAAyC;AAClD,eAAOL,aAAaO,IAAb,CAAkBN,IAAIO,aAAJ,CAAkBC,gBAApC,EAAsDC,IAAtD,CAA2D,UAAUC,MAAV,EAAkB;AAChF,mBAAOX,aAAaY,cAAb,CAA4Bf,EAAEgB,IAAF,CAAOF,OAAOM,MAAd,EAAsBN,MAAtB,CAA5B,EAA2D;AAC9DI,yBAASX,eADqD;AAE9DY,uBAAOX;AAFuD,aAA3D,CAAP;AAIH,SALM,CAAP;AAMH,KAPD;;AASAJ,QAAIiB,aAAJ,GAAoB,UAASd,eAAT,EAA0BC,aAA1B,EAAyC;AACzD,eAAOL,aAAaO,IAAb,CAAkBN,IAAIO,aAAJ,CAAkBC,gBAApC,EAAsDC,IAAtD,CAA2D,UAAUC,MAAV,EAAkB;AAChF,mBAAOX,aAAaY,cAAb,CAA4Bf,EAAEgB,IAAF,CAAOF,OAAOO,aAAd,EAA6BP,MAA7B,CAA5B,EAAkE;AACrEI,yBAASX,eAD4D;AAErEY,uBAAOX;AAF8D,aAAlE,CAAP;AAIH,SALM,CAAP;AAMH,KAPD;;AASA,WAAOJ,GAAP;AACH,CAvCA","file":"SessionManager.js","sourcesContent":["/**\r\n * The contents of this file are subject to the terms of the Common Development and\r\n * Distribution License (the License). You may not use this file except in compliance with the\r\n * License.\r\n *\r\n * You can obtain a copy of the License at legal/CDDLv1.0.txt. See the License for the\r\n * specific language governing permission and limitations under the License.\r\n *\r\n * When distributing Covered Software, include this CDDL Header Notice in each file and include\r\n * the License file at legal/CDDLv1.0.txt. If applicable, add the following below the CDDL\r\n * Header, with the fields enclosed by brackets [] replaced by your own identifying\r\n * information: \"Portions copyright [year] [name of copyright owner]\".\r\n *\r\n * Copyright 2011-2016 ForgeRock AS.\r\n */\r\n/* eslint-disable */\r\n define([\r\n    \"jquery\",\r\n    \"underscore\",\r\n    \"org/forgerock/commons/ui/common/util/CookieHelper\",\r\n    \"org/forgerock/commons/ui/common/main/AbstractConfigurationAware\",\r\n    \"org/forgerock/commons/ui/common/util/ModuleLoader\"\r\n], function($, _, cookieHelper, AbstractConfigurationAware, ModuleLoader) {\r\n    var obj = new AbstractConfigurationAware();\r\n\r\n    obj.login = function(params, successCallback, errorCallback) {\r\n        // resets the session cookie to discard old session that may still exist\r\n        cookieHelper.deleteCookie(\"session-jwt\", \"/\", \"\");\r\n        return ModuleLoader.load(obj.configuration.loginHelperClass).then(function (helper) {\r\n            return ModuleLoader.promiseWrapper(_.bind(_.curry(helper.login)(params), helper), {\r\n                success: successCallback,\r\n                error: errorCallback\r\n            });\r\n        });\r\n    };\r\n\r\n    obj.logout = function(successCallback, errorCallback) {\r\n        return ModuleLoader.load(obj.configuration.loginHelperClass).then(function (helper) {\r\n            return ModuleLoader.promiseWrapper(_.bind(helper.logout, helper), {\r\n                success: successCallback,\r\n                error: errorCallback\r\n            });\r\n        });\r\n    };\r\n\r\n    obj.getLoggedUser = function(successCallback, errorCallback) {\r\n        return ModuleLoader.load(obj.configuration.loginHelperClass).then(function (helper) {\r\n            return ModuleLoader.promiseWrapper(_.bind(helper.getLoggedUser, helper), {\r\n                success: successCallback,\r\n                error: errorCallback\r\n            });\r\n        });\r\n    };\r\n\r\n    return obj;\r\n});"]}