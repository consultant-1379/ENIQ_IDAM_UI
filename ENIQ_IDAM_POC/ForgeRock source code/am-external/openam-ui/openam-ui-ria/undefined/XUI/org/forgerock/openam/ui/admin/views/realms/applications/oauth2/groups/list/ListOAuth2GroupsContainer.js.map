{"version":3,"sources":["../../../../../../../../../../../../XUI/org/forgerock/openam/ui/admin/views/realms/applications/oauth2/groups/list/ListOAuth2GroupsContainer.jsx"],"names":["ListOAuth2GroupsContainer","onDelete","bind","state","isFetching","realm","props","router","params","then","response","setState","setInstances","result","addMessage","type","TYPE_DANGER","ids","messages","displayMessageFromConfig","removeInstance","reason","newHref","getLink","configuration","routes","realmsApplicationsOAuth2GroupsNew","encodeURIComponent","handleEdit","id","routeTo","realmsApplicationsOAuth2GroupsEdit","args","trigger","handleDelete","message","count","length","groups","propTypes","arrayOf","object","func","isRequired","remote","oauth2","instances","dispatch"],"mappings":"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","file":"ListOAuth2GroupsContainer.js","sourcesContent":["/*\n * The contents of this file are subject to the terms of the Common Development and\n * Distribution License (the License). You may not use this file except in compliance with the\n * License.\n *\n * You can obtain a copy of the License at legal/CDDLv1.0.txt. See the License for the\n * specific language governing permission and limitations under the License.\n *\n * When distributing Covered Software, include this CDDL Header Notice in each file and include\n * the License file at legal/CDDLv1.0.txt. If applicable, add the following below the CDDL\n * Header, with the fields enclosed by brackets [] replaced by your own identifying\n * information: \"Portions copyright [year] [name of copyright owner]\".\n *\n * Copyright 2017 ForgeRock AS.\n */\nimport { bindActionCreators } from \"redux\";\nimport { first, forEach, map, values } from \"lodash\";\nimport { t } from \"i18next\";\nimport React, { Component, PropTypes } from \"react\";\n\nimport { getAll, remove } from \"org/forgerock/openam/ui/admin/services/realm/AgentGroupsService\";\nimport { OAUTH2_CLIENT } from \"org/forgerock/openam/ui/admin/services/realm/AgentTypes\";\nimport { removeInstance, setInstances } from \"store/modules/remote/oauth2/groups/instances\";\nimport connectWithStore from \"components/redux/connectWithStore\";\nimport ListOAuth2Groups from \"./ListOAuth2Groups\";\nimport Messages from \"org/forgerock/commons/ui/common/components/Messages\";\nimport Router from \"org/forgerock/commons/ui/common/main/Router\";\nimport showConfirmationBeforeAction from \"org/forgerock/openam/ui/admin/utils/form/showConfirmationBeforeAction\";\nimport withRouter from \"org/forgerock/commons/ui/common/components/hoc/withRouter\";\nimport withRouterPropType from \"org/forgerock/commons/ui/common/components/hoc/withRouterPropType\";\n\nclass ListOAuth2GroupsContainer extends Component {\n    constructor () {\n        super();\n        this.onDelete = this.onDelete.bind(this);\n        this.state = { isFetching: true };\n    }\n\n    componentDidMount () {\n        const realm = this.props.router.params[0];\n\n        getAll(realm, OAUTH2_CLIENT).then((response) => {\n            this.setState({ isFetching: false });\n            this.props.setInstances(response.result);\n        }, (response) => {\n            this.setState({ isFetching: false });\n            Messages.addMessage({ response, type: Messages.TYPE_DANGER });\n        });\n    }\n\n    onDelete (ids) {\n        const realm = this.props.router.params[0];\n\n        remove(realm, OAUTH2_CLIENT, ids)\n            .then((response) => map(response, first))\n            .then((response) => {\n                Messages.messages.displayMessageFromConfig(\"changesSaved\");\n\n                forEach(response, this.props.removeInstance);\n            }, (reason) => {\n                Messages.addMessage({ reason, type: Messages.TYPE_DANGER });\n            });\n    }\n\n    render () {\n        const realm = this.props.router.params[0];\n        const newHref = Router.getLink(Router.configuration.routes.realmsApplicationsOAuth2GroupsNew, [\n            encodeURIComponent(realm)\n        ]);\n        const handleEdit = (id) => Router.routeTo(Router.configuration.routes.realmsApplicationsOAuth2GroupsEdit, {\n            args: map([realm, id], encodeURIComponent),\n            trigger: true\n        });\n        const handleDelete = (ids) => {\n            showConfirmationBeforeAction({\n                message: t(\"console.applications.oauth2.groups.confirmDeleteSelected\", {\n                    count: ids.length\n                })\n            }, () => {\n                remove(realm, OAUTH2_CLIENT, ids)\n                    .then((response) => map(response, first))\n                    .then((response) => {\n                        Messages.messages.displayMessageFromConfig(\"changesSaved\");\n\n                        forEach(response, this.props.removeInstance);\n                    }, (reason) => {\n                        Messages.addMessage({ reason, type: Messages.TYPE_DANGER });\n                    });\n            });\n        };\n        return (\n            <ListOAuth2Groups\n                groups={ this.props.groups }\n                isFetching={ this.state.isFetching }\n                newHref={ `#${newHref}` }\n                onDelete={ handleDelete }\n                onEdit={ handleEdit }\n            />\n        );\n    }\n}\n\nListOAuth2GroupsContainer.propTypes = {\n    groups: PropTypes.arrayOf(PropTypes.object),\n    removeInstance: PropTypes.func.isRequired,\n    router: withRouterPropType,\n    setInstances: PropTypes.func.isRequired\n};\n\nListOAuth2GroupsContainer = connectWithStore(ListOAuth2GroupsContainer,\n    (state) => ({\n        groups: values(state.remote.oauth2.groups.instances)\n    }),\n    (dispatch) => ({\n        removeInstance: bindActionCreators(removeInstance, dispatch),\n        setInstances: bindActionCreators(setInstances, dispatch)\n    })\n);\nListOAuth2GroupsContainer = withRouter(ListOAuth2GroupsContainer);\n\nexport default ListOAuth2GroupsContainer;\n"]}