{"version":3,"sources":["../../../../../../../../XUI/org/forgerock/openam/ui/admin/services/global/SessionsService.jsm"],"names":["getByRealmAndUsername","invalidateByHandles","obj","host","context","realm","username","queryFilter","encodeURIComponent","serviceCall","url","headers","then","response","result","handles","type","data","JSON","stringify","sessionHandles"],"mappings":";;;;;;YA0BgBA,qB,GAAAA,qB;YASAC,mB,GAAAA,mB;;;;;;;;;;;;;;AAXhB,QAAMC,MAAM,oCAAwB,oBAAUC,IAAlC,GAAyC,oBAAUC,OAAnD,WAAZ,C,CAxBA;;;;;;;;;;;;;;;;AAgBA;;;;AAUO,aAASJ,qBAAT,CAAgCK,KAAhC,EAAuCC,QAAvC,EAAiD;AACpD,YAAMC,cAAcC,sCAAmCF,QAAnC,0BAA8DD,KAA9D,QAApB;;AAEA,eAAOH,IAAIO,WAAJ,CAAgB;AACnBC,iBAAK,oDAAmCH,WAAnC,EAAkD,EAAEF,OAAO,KAAT,EAAlD,CADc;AAEnBM,qBAAS,EAAE,sBAAsB,2BAAxB;AAFU,SAAhB,EAGJC,IAHI,CAGC,UAACC,QAAD;AAAA,mBAAcA,SAASC,MAAvB;AAAA,SAHD,CAAP;AAIH;;AAEM,aAASb,mBAAT,CAA8Bc,OAA9B,EAAuC;AAC1C,eAAOb,IAAIO,WAAJ,CAAgB;AACnBC,iBAAK,wBAAS,kCAAT,EAA6C,EAAEL,OAAO,KAAT,EAA7C,CADc;AAEnBW,kBAAM,MAFa;AAGnBL,qBAAS,EAAE,sBAAsB,2BAAxB,EAHU;AAInBM,kBAAMC,KAAKC,SAAL,CAAe,EAAEC,gBAAgBL,OAAlB,EAAf;AAJa,SAAhB,EAKJH,IALI,CAKC,UAACC,QAAD;AAAA,mBAAcA,SAASC,MAAvB;AAAA,SALD,CAAP;AAMH","file":"SessionsService.js","sourcesContent":["/*\n * The contents of this file are subject to the terms of the Common Development and\n * Distribution License (the License). You may not use this file except in compliance with the\n * License.\n *\n * You can obtain a copy of the License at legal/CDDLv1.0.txt. See the License for the\n * specific language governing permission and limitations under the License.\n *\n * When distributing Covered Software, include this CDDL Header Notice in each file and include\n * the License file at legal/CDDLv1.0.txt. If applicable, add the following below the CDDL\n * Header, with the fields enclosed by brackets [] replaced by your own identifying\n * information: \"Portions copyright [year] [name of copyright owner]\".\n *\n * Copyright 2016-2017 ForgeRock AS.\n */\n\n/**\n * @module org/forgerock/openam/ui/admin/services/global/SessionsService\n */\n\nimport AbstractDelegate from \"org/forgerock/commons/ui/common/main/AbstractDelegate\";\nimport Constants from \"org/forgerock/commons/ui/common/util/Constants\";\nimport fetchUrl from \"org/forgerock/openam/ui/common/services/fetchUrl\";\n\nconst obj = new AbstractDelegate(`${Constants.host}${Constants.context}/json`);\n\nexport function getByRealmAndUsername (realm, username) {\n    const queryFilter = encodeURIComponent(`username eq \"${username}\" and realm eq \"${realm}\"`);\n\n    return obj.serviceCall({\n        url: fetchUrl(`/sessions?_queryFilter=${queryFilter}`, { realm: false }),\n        headers: { \"Accept-API-Version\": \"protocol=1.0,resource=2.0\" }\n    }).then((response) => response.result);\n}\n\nexport function invalidateByHandles (handles) {\n    return obj.serviceCall({\n        url: fetchUrl(\"/sessions?_action=logoutByHandle\", { realm: false }),\n        type: \"POST\",\n        headers: { \"Accept-API-Version\": \"protocol=1.0,resource=2.0\" },\n        data: JSON.stringify({ sessionHandles: handles })\n    }).then((response) => response.result);\n}\n"]}