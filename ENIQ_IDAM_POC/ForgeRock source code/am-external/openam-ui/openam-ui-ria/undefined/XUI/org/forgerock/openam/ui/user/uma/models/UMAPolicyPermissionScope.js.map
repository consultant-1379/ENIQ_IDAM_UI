{"version":3,"sources":["../../../../../../../../XUI/org/forgerock/openam/ui/user/uma/models/UMAPolicyPermissionScope.js"],"names":["define","$","_","Backbone","RelationalModel","extend","parse","response","isUrl","id","resolve","name","url","resolved","ajax","async","dataType","success","data","icon_uri","sync","method","model","options","beforeSend","xhr","setRequestHeader","Model","prototype","call"],"mappings":";;AAAA;;;;;;;;;;;;;;;;AAgBAA,OAAO,CACH,QADG,EAEH,QAFG,EAGH,UAHG,EAIH,qBAJG,CAAP,EAKG,UAAUC,CAAV,EAAaC,CAAb,EAAgBC,QAAhB,EAA0B;AACzB,WAAOA,SAASC,eAAT,CAAyBC,MAAzB,CAAgC;AACnCC,aADmC,iBAC5BC,QAD4B,EAClB;AACb,gBAAIL,EAAEM,KAAF,CAAQD,SAASE,EAAjB,CAAJ,EAA0B;AACtBF,2BAAW,KAAKG,OAAL,CAAaH,SAASE,EAAtB,CAAX;AACH,aAFD,MAEO;AACHF,yBAASI,IAAT,GAAgBJ,SAASE,EAAzB;AACH;;AAED,mBAAOF,QAAP;AACH,SATkC;AAUnCG,eAVmC,mBAU1BE,GAV0B,EAUrB;AACV,gBAAIC,WAAW;AACXJ,oBAAIG,GADO;AAEXD,sBAAMC;AAFK,aAAf;;AAKA;AACAX,cAAEa,IAAF,CAAO;AACHC,uBAAO,KADJ;AAEHC,0BAAU,MAFP;AAGHC,uBAHG,mBAGMC,IAHN,EAGY;AACXL,6BAASF,IAAT,GAAgBO,KAAKP,IAArB;AACAE,6BAAS,UAAT,IAAuBK,KAAKC,QAA5B;AACH,iBANE;;AAOHP;AAPG,aAAP;;AAUA,mBAAOC,QAAP;AACH,SA5BkC;AA6BnCO,YA7BmC,gBA6B7BC,MA7B6B,EA6BrBC,KA7BqB,EA6BdC,OA7Bc,EA6BL;AAC1BA,oBAAQC,UAAR,GAAqB,UAAUC,GAAV,EAAe;AAChCA,oBAAIC,gBAAJ,CAAqB,oBAArB,EAA2C,2BAA3C;AACH,aAFD;;AAIA,mBAAOvB,SAASwB,KAAT,CAAeC,SAAf,CAAyBR,IAAzB,CAA8BS,IAA9B,CAAmC,IAAnC,EAAyCR,MAAzC,EAAiDC,KAAjD,EAAwDC,OAAxD,CAAP;AACH;AAnCkC,KAAhC,CAAP;AAqCH,CA3CD","file":"UMAPolicyPermissionScope.js","sourcesContent":["/*\n * The contents of this file are subject to the terms of the Common Development and\n * Distribution License (the License). You may not use this file except in compliance with the\n * License.\n *\n * You can obtain a copy of the License at legal/CDDLv1.0.txt. See the License for the\n * specific language governing permission and limitations under the License.\n *\n * When distributing Covered Software, include this CDDL Header Notice in each file and include\n * the License file at legal/CDDLv1.0.txt. If applicable, add the following below the CDDL\n * Header, with the fields enclosed by brackets [] replaced by your own identifying\n * information: \"Portions copyright [year] [name of copyright owner]\".\n *\n * Copyright 2015-2017 ForgeRock AS.\n */\n\ndefine([\n    \"jquery\",\n    \"lodash\",\n    \"backbone\",\n    \"backbone-relational\"\n], function ($, _, Backbone) {\n    return Backbone.RelationalModel.extend({\n        parse (response) {\n            if (_.isUrl(response.id)) {\n                response = this.resolve(response.id);\n            } else {\n                response.name = response.id;\n            }\n\n            return response;\n        },\n        resolve (url) {\n            var resolved = {\n                id: url,\n                name: url\n            };\n\n            // Synchronous!\n            $.ajax({\n                async: false,\n                dataType: \"json\",\n                success (data) {\n                    resolved.name = data.name;\n                    resolved[\"icon_uri\"] = data.icon_uri;\n                },\n                url\n            });\n\n            return resolved;\n        },\n        sync (method, model, options) {\n            options.beforeSend = function (xhr) {\n                xhr.setRequestHeader(\"Accept-API-Version\", \"protocol=1.0,resource=1.0\");\n            };\n\n            return Backbone.Model.prototype.sync.call(this, method, model, options);\n        }\n    });\n});\n"]}