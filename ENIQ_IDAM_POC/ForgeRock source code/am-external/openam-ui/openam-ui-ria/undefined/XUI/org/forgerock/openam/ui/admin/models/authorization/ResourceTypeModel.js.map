{"version":3,"sources":["../../../../../../../../XUI/org/forgerock/openam/ui/admin/models/authorization/ResourceTypeModel.js"],"names":["define","_","Backbone","URLHelper","ModelUtils","Model","extend","idAttribute","urlRoot","substitute","defaults","uuid","description","actions","patterns","validate","attrs","name","trim","indexOf","isEmpty","sync","method","model","options","beforeSend","xhr","setRequestHeader","error","errorHandler","toLowerCase","id","url","prototype","call"],"mappings":";;AAAA;;;;;;;;;;;;;;;;AAgBAA,OAAO,CACH,QADG,EAEH,UAFG,EAGH,+CAHG,EAIH,gDAJG,CAAP,EAKG,UAAUC,CAAV,EAAaC,QAAb,EAAuBC,SAAvB,EAAkCC,UAAlC,EAA8C;AAC7C,WAAOF,SAASG,KAAT,CAAeC,MAAf,CAAsB;AACzBC,qBAAa,MADY;AAEzBC,iBAASL,UAAUM,UAAV,CAAqB,uBAArB,CAFgB;;AAIzBC,gBAJyB,sBAIb;AACR,mBAAO;AACHC,sBAAM,IADH;AAEHC,6BAAa,EAFV;AAGHC,yBAAS,EAHN;AAIHC,0BAAU;AAJP,aAAP;AAMH,SAXwB;AAazBC,gBAbyB,oBAafC,KAbe,EAaR;AACb,gBAAIA,MAAMC,IAAN,CAAWC,IAAX,OAAsB,EAA1B,EAA8B;AAC1B,uBAAO,aAAP;AACH;;AAED;AACA,gBAAIF,MAAMC,IAAN,CAAWE,OAAX,CAAmB,GAAnB,MAA4B,CAAhC,EAAmC;AAC/B,uBAAO,wBAAP;AACH;;AAED,gBAAIlB,EAAEmB,OAAF,CAAUJ,MAAMF,QAAhB,CAAJ,EAA+B;AAC3B,uBAAO,wBAAP;AACH;;AAED,gBAAIb,EAAEmB,OAAF,CAAUJ,MAAMH,OAAhB,CAAJ,EAA8B;AAC1B,uBAAO,uBAAP;AACH;AACJ,SA9BwB;AAgCzBQ,YAhCyB,gBAgCnBC,MAhCmB,EAgCXC,KAhCW,EAgCJC,OAhCI,EAgCK;AAC1BA,sBAAUA,WAAW,EAArB;AACAA,oBAAQC,UAAR,GAAqB,UAAUC,GAAV,EAAe;AAChCA,oBAAIC,gBAAJ,CAAqB,oBAArB,EAA2C,2BAA3C;AACH,aAFD;AAGAH,oBAAQI,KAAR,GAAgBxB,WAAWyB,YAA3B;;AAEA,gBAAIP,OAAOQ,WAAP,OAAyB,QAAzB,IAAqCP,MAAMQ,EAAN,KAAa,IAAtD,EAA4D;AACxDP,wBAAQQ,GAAR,GAAiB,KAAKxB,OAAL,EAAjB;AACH;;AAED,mBAAON,SAASG,KAAT,CAAe4B,SAAf,CAAyBZ,IAAzB,CAA8Ba,IAA9B,CAAmC,IAAnC,EAAyCZ,MAAzC,EAAiDC,KAAjD,EAAwDC,OAAxD,CAAP;AACH;AA5CwB,KAAtB,CAAP;AA8CH,CApDD","file":"ResourceTypeModel.js","sourcesContent":["/*\n * The contents of this file are subject to the terms of the Common Development and\n * Distribution License (the License). You may not use this file except in compliance with the\n * License.\n *\n * You can obtain a copy of the License at legal/CDDLv1.0.txt. See the License for the\n * specific language governing permission and limitations under the License.\n *\n * When distributing Covered Software, include this CDDL Header Notice in each file and include\n * the License file at legal/CDDLv1.0.txt. If applicable, add the following below the CDDL\n * Header, with the fields enclosed by brackets [] replaced by your own identifying\n * information: \"Portions copyright [year] [name of copyright owner]\".\n *\n * Copyright 2015-2017 ForgeRock AS.\n */\n\ndefine([\n    \"lodash\",\n    \"backbone\",\n    \"org/forgerock/openam/ui/common/util/URLHelper\",\n    \"org/forgerock/openam/ui/admin/utils/ModelUtils\"\n], function (_, Backbone, URLHelper, ModelUtils) {\n    return Backbone.Model.extend({\n        idAttribute: \"uuid\",\n        urlRoot: URLHelper.substitute(\"__api__/resourcetypes\"),\n\n        defaults () {\n            return {\n                uuid: null,\n                description: \"\",\n                actions: {},\n                patterns: []\n            };\n        },\n\n        validate (attrs) {\n            if (attrs.name.trim() === \"\") {\n                return \"errorNoName\";\n            }\n\n            // entities that are stored in LDAP can't start with '#'. http://www.jguru.com/faq/view.jsp?EID=113588\n            if (attrs.name.indexOf(\"#\") === 0) {\n                return \"errorCantStartWithHash\";\n            }\n\n            if (_.isEmpty(attrs.patterns)) {\n                return \"resTypeErrorNoPatterns\";\n            }\n\n            if (_.isEmpty(attrs.actions)) {\n                return \"resTypeErrorNoActions\";\n            }\n        },\n\n        sync (method, model, options) {\n            options = options || {};\n            options.beforeSend = function (xhr) {\n                xhr.setRequestHeader(\"Accept-API-Version\", \"protocol=1.0,resource=1.0\");\n            };\n            options.error = ModelUtils.errorHandler;\n\n            if (method.toLowerCase() === \"create\" || model.id === null) {\n                options.url = `${this.urlRoot()}/?_action=create`;\n            }\n\n            return Backbone.Model.prototype.sync.call(this, method, model, options);\n        }\n    });\n});\n"]}