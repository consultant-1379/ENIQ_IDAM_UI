{"version":3,"sources":["../../../../../../../XUI/org/forgerock/openam/ui/user/login/removeOAuth2Goto.jsm"],"names":["removeOAuth2Goto","params","consentPagePath","goto","decodeURIComponent","indexOf"],"mappings":";;;;;;AAAA;;;;;;;;;;;;;;;;AAgBA;;;;;;;;;AASA,QAAMA,mBAAmB,SAAnBA,gBAAmB,CAACC,MAAD,EAAY;AACjC,YAAMC,kBAAkB,mBAAxB;AACA,YAAID,OAAOE,IAAP,IAAeC,mBAAmBH,OAAOE,IAA1B,EAAgCE,OAAhC,CAAwCH,eAAxC,IAA2D,CAA9E,EAAiF;AAC7E,mBAAOD,OAAOE,IAAd;AACH;AACD,eAAOF,MAAP;AACH,KAND;;sBAQeD,gB","file":"removeOAuth2Goto.js","sourcesContent":["/*\n * The contents of this file are subject to the terms of the Common Development and\n * Distribution License (the License). You may not use this file except in compliance with the\n * License.\n *\n * You can obtain a copy of the License at legal/CDDLv1.0.txt. See the License for the\n * specific language governing permission and limitations under the License.\n *\n * When distributing Covered Software, include this CDDL Header Notice in each file and include\n * the License file at legal/CDDLv1.0.txt. If applicable, add the following below the CDDL\n * Header, with the fields enclosed by brackets [] replaced by your own identifying\n * information: \"Portions copyright [year] [name of copyright owner]\".\n *\n * Copyright 2017 ForgeRock AS.\n */\n\n/**\n  * @module org/forgerock/openam/ui/user/login/removeOAuth2Goto\n  * @param {Object} params Takes an object of key value pairs\n  * During authentication between a client and an IDP a goto is issued with a path to the consent page and params which\n  * are only relevant to that specific authentication request. Futher authentication requests should be issued new\n  * parameters, and so we need to remove the any old goto's containing the consent page path as the parameters will no\n  * longer be valid.\n  * @returns {Object} Returns the key value pairs minus the goto if that contained the oauth2/authorize in its path.\n  */\nconst removeOAuth2Goto = (params) => {\n    const consentPagePath = \"oauth2/authorize?\";\n    if (params.goto && decodeURIComponent(params.goto).indexOf(consentPagePath) > 0) {\n        delete params.goto;\n    }\n    return params;\n};\n\nexport default removeOAuth2Goto;\n"]}