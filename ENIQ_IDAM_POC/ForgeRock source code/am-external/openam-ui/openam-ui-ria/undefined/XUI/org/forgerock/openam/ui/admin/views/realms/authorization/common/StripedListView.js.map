{"version":3,"sources":["../../../../../../../../../../XUI/org/forgerock/openam/ui/admin/views/realms/authorization/common/StripedListView.js"],"names":["define","$","_","AbstractView","UIUtils","extend","noBaseTemplate","template","events","render","data","el","callback","element","items","cloneDeep","sort","itemTpl","parentRender","renderItems","setItems","self","filter","getFilteredItems","getAllItems","fillTemplateWithData","tpl","$el","find","html","clickItem","e","type","keyCode","target","prev","focus","next","created","is","parents","length","currentTarget","li","item","filterItems","parent","setFilter","value","emptyFilter","val","toString","toLowerCase","indexOf","removeItem","without","addItem","push"],"mappings":"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","file":"StripedListView.js","sourcesContent":["/*\n * The contents of this file are subject to the terms of the Common Development and\n * Distribution License (the License). You may not use this file except in compliance with the\n * License.\n *\n * You can obtain a copy of the License at legal/CDDLv1.0.txt. See the License for the\n * specific language governing permission and limitations under the License.\n *\n * When distributing Covered Software, include this CDDL Header Notice in each file and include\n * the License file at legal/CDDLv1.0.txt. If applicable, add the following below the CDDL\n * Header, with the fields enclosed by brackets [] replaced by your own identifying\n * information: \"Portions copyright [year] [name of copyright owner]\".\n *\n * Copyright 2015-2017 ForgeRock AS.\n */\n\ndefine([\n    \"jquery\",\n    \"lodash\",\n    \"org/forgerock/commons/ui/common/main/AbstractView\",\n    \"org/forgerock/commons/ui/common/util/UIUtils\"\n], function ($, _, AbstractView, UIUtils) {\n    return AbstractView.extend({\n        noBaseTemplate: true,\n        template: \"templates/admin/views/realms/authorization/common/StripedListWrapperTemplate.html\",\n        events: {\n            \"click [data-list-item]\":   \"clickItem\",\n            \"keyup [data-list-item]\":   \"clickItem\",\n            \"click [data-list-filter]\": \"filterItems\",\n            \"keyup [data-list-filter]\": \"filterItems\"\n        },\n\n        render (data, el, callback) {\n            this.data = data;\n            this.element = el;\n            this.items = data.items ? _.cloneDeep(data.items).sort() : [];\n\n            if (!this.data.itemTpl) {\n                this.data.itemTpl = \"templates/admin/views/realms/authorization/common/StripedListItemTemplate.html\";\n            }\n\n            this.parentRender(function () {\n                this.renderItems();\n\n                if (callback) {\n                    callback();\n                }\n            });\n        },\n\n        setItems (items) {\n            this.items = _.cloneDeep(items).sort();\n        },\n\n        renderItems () {\n            var self = this;\n            this.data.items = this.filter ? this.getFilteredItems() : this.getAllItems();\n            UIUtils.fillTemplateWithData(this.data.itemTpl, this.data, function (tpl) {\n                self.$el.find(\".list-group\").html(tpl);\n            });\n        },\n\n        clickItem (e) {\n            if (e.type === \"keyup\") {\n                switch (e.keyCode) {\n                    case 38: // arrow down\n                        $(e.target).prev(\"li\").focus();\n                        return;\n                    case 40: // arrow up\n                        $(e.target).next(\"li\").focus();\n                        return;\n                    case 13:\n                        break;\n                    default:\n                        return;\n                }\n            }\n\n            if (this.data.created && !$(e.target).is(\".fa-close\") ||\n                $(e.target).is(\".radio-inline\") ||\n                $(e.target).parents(\".radio-inline\").length) {\n                return;\n            }\n\n            var target = $(e.currentTarget),\n                li = target.is(\"li\") ? target : target.parents(\"li\"),\n                item = li.data(\"listItem\");\n\n            if (!item) {\n                return;\n            }\n\n            if (this.data.clickItem) {\n                this.data.clickItem(item);\n            }\n        },\n\n        filterItems (e) {\n            if (e.type === \"keyup\" && e.keyCode === 40) {\n                $(e.target).parent().next().find(\"li:first-child\").focus();\n                return;\n            }\n\n            this.setFilter(e.currentTarget.value);\n            this.renderItems();\n        },\n\n        emptyFilter () {\n            this.setFilter(\"\");\n\n            this.$el.find(\"[data-list-filter]\").val(\"\");\n        },\n\n        setFilter (filter) {\n            this.filter = filter.toString().toLowerCase();\n        },\n\n        getAllItems () {\n            return this.items;\n        },\n\n        getFilteredItems () {\n            var filter = this.filter;\n\n            return _.filter(this.items, function (item) {\n                return item.toString().toLowerCase().indexOf(filter) !== -1;\n            });\n        },\n\n        removeItem (item) {\n            this.items = _.without(this.items, item);\n        },\n\n        addItem (item) {\n            this.items.push(item);\n            this.items.sort();\n        }\n    });\n});\n"]}