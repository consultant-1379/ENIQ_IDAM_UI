{"version":3,"sources":["../../../../../../../XUI/org/forgerock/commons/ui/user/anonymousProcess/SelfRegistrationView.js"],"names":["define","$","form2js","AnonymousProcessView","KBAView","SelfRegistrationView","extend","processType","i18nBase","getFormContent","form","element","find","hasAttribute","getQuestions","renderProcessState","response","prototype","call","then","type","tag","render","requirements","properties","kba"],"mappings":";;AAAA;;;;;;;;;;;;;;;AAeA;AACCA,OAAO,CACJ,QADI,EAEJ,SAFI,EAGJ,qEAHI,EAIJ,wDAJI,CAAP,EAKE,UAASC,CAAT,EAAYC,OAAZ,EAAqBC,oBAArB,EAA2CC,OAA3C,EAAoD;;AAEnD,QAAIC,uBAAuBF,qBAAqBG,MAArB,CAA4B;AACnDC,qBAAa,cADsC;AAEnDC,kBAAU,8BAFyC;AAGnDC,wBAAgB,0BAAY;AACxB,gBAAIC,OAAOT,EAAE,KAAKU,OAAP,EAAgBC,IAAhB,CAAqB,MAArB,EAA6B,CAA7B,CAAX;;AAEA,gBAAIF,KAAKG,YAAL,CAAkB,oBAAlB,CAAJ,EAA6C;AACzC,uBAAO,EAAE,OAAOT,QAAQU,YAAR,EAAT,EAAP;AACH,aAFD,MAEO;AACH,uBAAOZ,QAAQQ,IAAR,CAAP;AACH;AACJ,SAXkD;AAYnDK,4BAAoB,4BAAUC,QAAV,EAAoB;AACpCb,iCAAqBc,SAArB,CAA+BF,kBAA/B,CAAkDG,IAAlD,CAAuD,IAAvD,EAA6DF,QAA7D,EAAuEG,IAAvE,CAA4E,YAAY;AACpF,oBAAIH,SAASI,IAAT,KAAkB,kCAAlB,IAAwDJ,SAASK,GAAT,KAAiB,SAA7E,EAAwF;AACpFjB,4BAAQkB,MAAR,CAAeN,SAASO,YAAT,CAAsBC,UAAtB,CAAiCC,GAAhD;AACH;AACJ,aAJD;AAKH;AAlBkD,KAA5B,CAA3B;;AAqBA,WAAO,IAAIpB,oBAAJ,EAAP;AACH,CA7BA","file":"SelfRegistrationView.js","sourcesContent":["/**\r\n * The contents of this file are subject to the terms of the Common Development and\r\n * Distribution License (the License). You may not use this file except in compliance with the\r\n * License.\r\n *\r\n * You can obtain a copy of the License at legal/CDDLv1.0.txt. See the License for the\r\n * specific language governing permission and limitations under the License.\r\n *\r\n * When distributing Covered Software, include this CDDL Header Notice in each file and include\r\n * the License file at legal/CDDLv1.0.txt. If applicable, add the following below the CDDL\r\n * Header, with the fields enclosed by brackets [] replaced by your own identifying\r\n * information: \"Portions copyright [year] [name of copyright owner]\".\r\n *\r\n * Copyright 2015-2016 ForgeRock AS.\r\n */\r\n/* eslint-disable */\r\n define([\r\n    \"jquery\",\r\n    \"form2js\",\r\n    \"org/forgerock/commons/ui/user/anonymousProcess/AnonymousProcessView\",\r\n    \"org/forgerock/commons/ui/user/anonymousProcess/KBAView\"\r\n], function($, form2js, AnonymousProcessView, KBAView) {\r\n\r\n    var SelfRegistrationView = AnonymousProcessView.extend({\r\n        processType: \"registration\",\r\n        i18nBase: \"common.user.selfRegistration\",\r\n        getFormContent: function () {\r\n            var form = $(this.element).find(\"form\")[0];\r\n\r\n            if (form.hasAttribute(\"data-kba-questions\")) {\r\n                return { \"kba\": KBAView.getQuestions() };\r\n            } else {\r\n                return form2js(form);\r\n            }\r\n        },\r\n        renderProcessState: function (response) {\r\n            AnonymousProcessView.prototype.renderProcessState.call(this, response).then(function () {\r\n                if (response.type === \"kbaSecurityAnswerDefinitionStage\" && response.tag === \"initial\") {\r\n                    KBAView.render(response.requirements.properties.kba);\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n    return new SelfRegistrationView();\r\n});"]}