{"version":3,"sources":["../../../../../../../../../../XUI/org/forgerock/openam/ui/admin/views/realms/applications/agents/NewAgentView.jsm"],"names":["NewAgentView","template","partials","events","realmPath","agentType","then","response","options","schema","values","showOnlyRequiredAndEmpty","jsonSchemaView","type","data","title","t","parentRender","render","el","appendTo","$el","find","getData","addMessage","TYPE_DANGER"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QAsBMA,Y;;;AACF,gCAAe;AAAA;;AAAA;;AAGX,kBAAKC,QAAL,GAAgB,wEAAhB;AACA,kBAAKC,QAAL,GAAgB,CACZ,6BADY,CAAhB;AAGA,kBAAKC,MAAL,GAAc;AACV,uCAAuB;AADb,aAAd;AAPW;AAUd;;;;yCAC+B;AAAA;;AAAA;AAAA,oBAAvBC,SAAuB;AAAA,oBAAZC,SAAY;;AAC5B,oDAAgBD,SAAhB,EAA2BC,SAA3B,EAAsCC,IAAtC,CAA2C,UAACC,QAAD,EAAc;AACrD,wBAAMC,UAAU;AACZC,gCAAQF,SAASE,MADL;AAEZC,gCAAQH,SAASG,MAFL;AAGZC,kDAA0B;AAHd,qBAAhB;;AAMA,2BAAKC,cAAL,GAAsB,iCAAuBJ,OAAvB,CAAtB;AACA,2BAAKK,IAAL,GAAYR,SAAZ;AACA,2BAAKS,IAAL,CAAUV,SAAV,GAAsBA,SAAtB;AACA,2BAAKU,IAAL,CAAUC,KAAV,GAAkB,iBAAEC,CAAF,CAAI,uCAAJ,EAA6C,EAAEX,oBAAF,EAA7C,CAAlB;AACA,2BAAKY,YAAL,CAAkB,YAAM;AACpB,8CAAE,OAAKL,cAAL,CAAoBM,MAApB,GAA6BC,EAA/B,EAAmCC,QAAnC,CAA4C,OAAKC,GAAL,CAASC,IAAT,CAAc,kBAAd,CAA5C;AACH,qBAFD;AAGH,iBAdD;AAeH;;;4CACgB;AACb,2CAAO,KAAKR,IAAL,CAAUV,SAAjB,EAA4B,KAAKS,IAAjC,EAAuC,KAAKD,cAAL,CAAoBW,OAApB,EAAvC,EAAsEjB,IAAtE,CAA2E,YAAM;AAC7E;AACH,iBAFD,EAEG,UAACC,QAAD,EAAc;AACb,uCAASiB,UAAT,CAAoB;AAChBjB,0CADgB;AAEhBM,8BAAM,mBAASY;AAFC,qBAApB;AAIH,iBAPD;AAQH;;;;;;sBAGUzB,Y","file":"NewAgentView.js","sourcesContent":["/*\n * The contents of this file are subject to the terms of the Common Development and\n * Distribution License (the License). You may not use this file except in compliance with the\n * License.\n *\n * You can obtain a copy of the License at legal/CDDLv1.0.txt. See the License for the\n * specific language governing permission and limitations under the License.\n *\n * When distributing Covered Software, include this CDDL Header Notice in each file and include\n * the License file at legal/CDDLv1.0.txt. If applicable, add the following below the CDDL\n * Header, with the fields enclosed by brackets [] replaced by your own identifying\n * information: \"Portions copyright [year] [name of copyright owner]\".\n *\n * Copyright 2016-2017 ForgeRock AS.\n */\n\nimport $ from \"jquery\";\nimport AbstractView from \"org/forgerock/commons/ui/common/main/AbstractView\";\nimport FlatJSONSchemaView from \"org/forgerock/openam/ui/common/views/jsonSchema/FlatJSONSchemaView\";\nimport { create, getInitialState } from \"org/forgerock/openam/ui/admin/services/realm/AgentsService\";\nimport Messages from \"org/forgerock/commons/ui/common/components/Messages\";\n\nclass NewAgentView extends AbstractView {\n    constructor () {\n        super();\n\n        this.template = \"templates/admin/views/realms/applications/agents/NewAgentTemplate.html\";\n        this.partials = [\n            \"partials/alerts/_Alert.html\"\n        ];\n        this.events = {\n            \"click [data-create]\": \"onCreateClick\"\n        };\n    }\n    render ([realmPath, agentType]) {\n        getInitialState(realmPath, agentType).then((response) => {\n            const options = {\n                schema: response.schema,\n                values: response.values,\n                showOnlyRequiredAndEmpty: true\n            };\n\n            this.jsonSchemaView = new FlatJSONSchemaView(options);\n            this.type = agentType;\n            this.data.realmPath = realmPath;\n            this.data.title = $.t(\"console.applications.agents.new.title\", { agentType });\n            this.parentRender(() => {\n                $(this.jsonSchemaView.render().el).appendTo(this.$el.find(\"[data-json-form]\"));\n            });\n        });\n    }\n    onCreateClick () {\n        create(this.data.realmPath, this.type, this.jsonSchemaView.getData()).then(() => {\n            // TODO - Edit Agent Views\n        }, (response) => {\n            Messages.addMessage({\n                response,\n                type: Messages.TYPE_DANGER\n            });\n        });\n    }\n}\n\nexport default NewAgentView;\n"]}