{"version":3,"sources":["../../../../XUI/store/modules/remote/realms.jsm"],"names":["ADD_REALM","REMOVE_REALM","SET_REALMS","addRealm","removeRealm","setRealms","initialState","createPath","parentPath","name","addPayloadPath","payload","path","addPathToAction","handler","state","action","map","indexBy","value"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkBA;AACA,QAAMA,YAAY,yBAAlB;AACA,QAAMC,eAAe,4BAArB;AACA,QAAMC,aAAa,0BAAnB;;AAEA;AACO,QAAMC,8BAAW,gCAAaH,SAAb,CAAjB;AACA,QAAMI,oCAAc,gCAAaH,YAAb,CAApB;AACA,QAAMI,gCAAY,gCAAaH,UAAb,CAAlB;;AAEP;AACA,QAAMI,eAAe,EAArB;AACA,QAAMC,aAAa,SAAbA,UAAa,CAACC,UAAD,EAAaC,IAAb,EAAsB;AACrC,YAAID,eAAe,GAAnB,EAAwB;AACpB,mBAAOA,aAAaC,IAApB;AACH,SAFD,MAEO,IAAID,UAAJ,EAAgB;AACnB,mBAAUA,UAAV,SAAwBC,IAAxB;AACH,SAFM,MAEA;AACH,mBAAO,GAAP;AACH;AACJ,KARD;AASA,QAAMC,iBAAiB,SAAjBA,cAAiB,CAACC,OAAD;AAAA,4BAChBA,OADgB;AAEnBC,kBAAML,WAAWI,QAAQH,UAAnB,EAA+BG,QAAQF,IAAvC;AAFa;AAAA,KAAvB;AAIA,QAAMI,kBAAkB,SAAlBA,eAAkB,CAACC,OAAD;AAAA,eAAa,UAACC,KAAD,EAAQC,MAAR,EAAmB;AACpDA,mBAAOL,OAAP,GAAiBD,eAAeM,OAAOL,OAAtB,CAAjB;;AAEA,mBAAOG,QAAQC,KAAR,EAAeC,MAAf,CAAP;AACH,SAJuB;AAAA,KAAxB;sBAKe,uFACVhB,SADU,EACEa,gBAAgB,UAACE,KAAD,EAAQC,MAAR;AAAA,4BACtBD,KADsB,sBAExBC,OAAOL,OAAP,CAAeC,IAFS,eAGlBI,OAAOL,OAHW;AAAA,KAAhB,CADF,mCAOVV,YAPU,EAOKY,gBAAgB,UAACE,KAAD,EAAQC,MAAR;AAAA,eAAmB,kBAAKD,KAAL,EAAYC,OAAOL,OAAP,CAAeC,IAA3B,CAAnB;AAAA,KAAhB,CAPL,mCAQVV,UARU,EAQG,UAACa,KAAD,EAAQC,MAAR;AAAA,eAAmB,mBAAMA,OAAOL,OAAb,EAC5BM,GAD4B,CACxBP,cADwB,EAE5BQ,OAF4B,CAEpB,MAFoB,EAG5BC,KAH4B,EAAnB;AAAA,KARH,oBAYZb,YAZY,C","file":"realms.js","sourcesContent":["/*\n * The contents of this file are subject to the terms of the Common Development and\n * Distribution License (the License). You may not use this file except in compliance with the\n * License.\n *\n * You can obtain a copy of the License at legal/CDDLv1.0.txt. See the License for the\n * specific language governing permission and limitations under the License.\n *\n * When distributing Covered Software, include this CDDL Header Notice in each file and include\n * the License file at legal/CDDLv1.0.txt. If applicable, add the following below the CDDL\n * Header, with the fields enclosed by brackets [] replaced by your own identifying\n * information: \"Portions copyright [year] [name of copyright owner]\".\n *\n * Copyright 2017 ForgeRock AS.\n */\nimport { createAction, handleActions } from \"redux-actions\";\nimport { chain, omit } from \"lodash\";\n\n// Types\nconst ADD_REALM = \"remote/realms/ADD_REALM\";\nconst REMOVE_REALM = \"remote/realms/REMOVE_REALM\";\nconst SET_REALMS = \"remote/realms/SET_REALMS\";\n\n// Actions\nexport const addRealm = createAction(ADD_REALM);\nexport const removeRealm = createAction(REMOVE_REALM);\nexport const setRealms = createAction(SET_REALMS);\n\n// Reducer\nconst initialState = {};\nconst createPath = (parentPath, name) => {\n    if (parentPath === \"/\") {\n        return parentPath + name;\n    } else if (parentPath) {\n        return `${parentPath}/${name}`;\n    } else {\n        return \"/\";\n    }\n};\nconst addPayloadPath = (payload) => ({\n    ...payload,\n    path: createPath(payload.parentPath, payload.name)\n});\nconst addPathToAction = (handler) => (state, action) => {\n    action.payload = addPayloadPath(action.payload);\n\n    return handler(state, action);\n};\nexport default handleActions({\n    [ADD_REALM]: addPathToAction((state, action) => ({\n        ...state,\n        [action.payload.path]: {\n            ...action.payload\n        }\n    })),\n    [REMOVE_REALM]: addPathToAction((state, action) => omit(state, action.payload.path)),\n    [SET_REALMS]: (state, action) => chain(action.payload)\n        .map(addPayloadPath)\n        .indexBy(\"path\")\n        .value()\n}, initialState);\n"]}